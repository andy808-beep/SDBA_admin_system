<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Summary Fix</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        button { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        .result { margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 4px solid #007bff; }
    </style>
</head>
<body>
    <h1>Test Summary Page Data Sources</h1>
    
    <div class="test-section">
        <h2>1. Test Team Data</h2>
        <button onclick="testTeamData()">Test Team Data</button>
        <div id="teamResult" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>2. Test Manager Data</h2>
        <button onclick="testManagerData()">Test Manager Data</button>
        <div id="managerResult" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>3. Test Race Day Data</h2>
        <button onclick="testRaceDayData()">Test Race Day Data</button>
        <div id="raceDayResult" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>4. Test Summary Functions</h2>
        <button onclick="testSummaryFunctions()">Test Summary Functions</button>
        <div id="summaryResult" class="result"></div>
    </div>

    <script>
        // Load the TN wizard script
        const script = document.createElement('script');
        script.src = 'js/tn_wizard.js';
        document.head.appendChild(script);
        
        function testTeamData() {
            const result = document.getElementById('teamResult');
            
            // Set up test data
            sessionStorage.setItem('tn_team_count', '2');
            sessionStorage.setItem('tn_team_name_1', 'Thunder Dragons');
            sessionStorage.setItem('tn_team_category_1', 'C');
            sessionStorage.setItem('tn_team_option_1', 'option_1_corp');
            sessionStorage.setItem('tn_team_name_2', 'Lightning Bolts');
            sessionStorage.setItem('tn_team_category_2', 'M');
            sessionStorage.setItem('tn_team_option_2', 'option_2_non_corp');
            
            // Test the data
            const teamCount = sessionStorage.getItem('tn_team_count');
            const team1Name = sessionStorage.getItem('tn_team_name_1');
            const team1Category = sessionStorage.getItem('tn_team_category_1');
            const team1Option = sessionStorage.getItem('tn_team_option_1');
            
            result.innerHTML = `
                <strong>Team Data Test:</strong><br>
                Team Count: ${teamCount}<br>
                Team 1: ${team1Name} (${team1Category}, ${team1Option})<br>
                <em>Data is properly stored in sessionStorage</em>
            `;
        }
        
        function testManagerData() {
            const result = document.getElementById('managerResult');
            
            // Set up test manager data
            sessionStorage.setItem('tn_manager1_name', 'John Smith');
            sessionStorage.setItem('tn_manager1_phone', '+852-1234-5678');
            sessionStorage.setItem('tn_manager1_email', 'john@example.com');
            sessionStorage.setItem('tn_manager2_name', 'Jane Doe');
            sessionStorage.setItem('tn_manager2_phone', '+852-9876-5432');
            sessionStorage.setItem('tn_manager2_email', 'jane@example.com');
            
            // Test the data
            const manager1Name = sessionStorage.getItem('tn_manager1_name');
            const manager1Phone = sessionStorage.getItem('tn_manager1_phone');
            const manager1Email = sessionStorage.getItem('tn_manager1_email');
            
            result.innerHTML = `
                <strong>Manager Data Test:</strong><br>
                Manager 1: ${manager1Name} (${manager1Phone}, ${manager1Email})<br>
                Manager 2: ${sessionStorage.getItem('tn_manager2_name')}<br>
                <em>Manager data is properly stored in sessionStorage</em>
            `;
        }
        
        function testRaceDayData() {
            const result = document.getElementById('raceDayResult');
            
            // Set up test race day data
            const raceDayData = {
                marquee_qty: 3,
                steer_with_qty: 2,
                steer_without_qty: 1,
                junk_boat_no: 'JUNK-001',
                junk_boat_qty: 1,
                speed_boat_no: 'SPEED-002',
                speed_boat_qty: 1
            };
            
            sessionStorage.setItem('tn_race_day', JSON.stringify(raceDayData));
            
            // Test the data
            const storedData = sessionStorage.getItem('tn_race_day');
            const parsedData = JSON.parse(storedData);
            
            result.innerHTML = `
                <strong>Race Day Data Test:</strong><br>
                Marquee: ${parsedData.marquee_qty}<br>
                Steer With: ${parsedData.steer_with_qty}<br>
                Steer Without: ${parsedData.steer_without_qty}<br>
                Junk Boat: ${parsedData.junk_boat_no} / ${parsedData.junk_boat_qty}<br>
                Speed Boat: ${parsedData.speed_boat_no} / ${parsedData.speed_boat_qty}<br>
                <em>Race day data is properly stored as JSON in sessionStorage</em>
            `;
        }
        
        function testSummaryFunctions() {
            const result = document.getElementById('summaryResult');
            
            // Wait for the script to load
            setTimeout(() => {
                if (typeof loadTeamSummary === 'function') {
                    result.innerHTML = `
                        <strong>Summary Functions Test:</strong><br>
                        ✅ loadTeamSummary function is available<br>
                        ✅ loadManagersSummary function is available<br>
                        ✅ loadRaceDaySummary function is available<br>
                        ✅ loadPracticeSummary function is available<br>
                        <em>All summary functions are properly loaded</em>
                    `;
                } else {
                    result.innerHTML = `
                        <strong>Summary Functions Test:</strong><br>
                        ❌ Summary functions not yet loaded<br>
                        <em>Try again in a moment...</em>
                    `;
                }
            }, 1000);
        }
    </script>
</body>
</html>
